<!DOCTYPE html>
<html
  lang="en"
  data-bs-theme="{{ theme }}"
  class="sl-theme-{{ theme }} {{ color }}-primary"
>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="manifest" href="/static/manifest.webmanifest" />

    <!-- Shoelace components -->
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/shoelace.js"
    ></script>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <!-- This is only for error monitoring -->
    <script
      src="https://js.sentry-cdn.com/d1913311367ec68822f82f8ced7bc88f.min.js"
      crossorigin="anonymous"
    ></script>
    <script>
      if (window.Sentry) {
        Sentry.onLoad(function () {
          Sentry.init({
            // You can add any additional configuration here
          });
        });
      }
    </script>

    <link href="/static/css/all.css" rel="stylesheet" />
    <link href="/static/css/light.css" rel="stylesheet" />
    <link href="/static/css/dark.css" rel="stylesheet" />

    <link
      rel="icon"
      href="{% block icon %}/static/images/logo.svg{% endblock icon %}"
    />
    <title>{% block title %}{% endblock title %}</title>
    <script src="/static/js/theme.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/stream-chat"></script>
    <script src="/static/js/chat.mjs" type="module"></script>
  </head>

  <style>
    @font-face {
      font-family: Inter;
      src: url("/static/fonts/Inter-VariableFont_slnt,wght.ttf");
    }
  </style>

  <script>
    const THEME_URL = "{{ url_for('theme_bp.set_theme') }}";
    const THEME = "{{ theme }}";
    const CAN_EDIT_BRACKET = "{{ CAN_EDIT_BRACKET }}" == "True";
    const MY_BRACKET_COUNT = {{ MY_BRACKET_COUNT }};
    const CURRENT_YEAR = {{ CURRENT_YEAR }};
    const CREATE_STREAMCHAT_TOKEN_URL = "{{ url_for('auth_bp.create_streamchat_token') }}";
    let CHAT_USER;
    {% if current_user.is_authenticated %}
        CHAT_USER = JSON.parse(`{{ current_user.to_dict()|tojson }}`);
    {% endif %}
  </script>

  <body
    class="{% if not backgroundColorMatches %}{{ backgroundColor }}-background{% endif %}"
    {%
    if
    backgroundColorMatches
    %}style="background-color: {{ backgroundColor }}"
    {%
    endif
    %}
  >
    {% include "navbar.html" %}

    <div class="container my-4 h-100">
      {% with messages = get_flashed_messages(with_categories=true) %}
      <div id="alerts" class="container d-flex justify-content-center">
        {% if messages %} {% for category, message in messages %}
        <sl-alert variant="{{ category }}" duration="5000" open closable>
          {{ message }}
        </sl-alert>
        {% endfor %} {% endif %}
      </div>
      {% endwith %}

      <div
        id="countdown"
        class="alert alert-primary center-text"
        role="alert"
        hidden="true"
      >
        Brackets will close at 2:00PM EDT on Thursday March 23. Please make all
        changes before then.
        <div>
          <ul class="fw-bold">
            <li class="time-list p-1">
              <span class="time fs-5" id="days"></span>
              days
            </li>
            <li class="time-list p-1">
              <span class="time fs-5" id="hours"></span>
              hours
            </li>
            <li class="time-list p-1">
              <span class="time fs-5" id="mins"></span>
              minutes
            </li>
            <li class="time-list p-1">
              <span class="time fs-5" id="secs"></span>
              seconds
            </li>
          </ul>
        </div>
        <div>
          <a href="{{ url_for('editbracket_bp.new_bracket') }}"
            >Create your bracket now!</a
          >
        </div>
      </div>

      {% block content %}{% endblock content %}
    </div>

    <sl-button id="chatButton" variant="primary" hidden
      ><sl-icon name="wechat" label="Chat"></sl-icon
      ><sl-badge id="message-badge" pill hidden>0</sl-badge></sl-button
    >

    <script src="/static/js/countdown.js"></script>
    <!-- Optional JavaScript -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
